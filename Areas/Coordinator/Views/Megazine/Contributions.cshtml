@model IEnumerable<WebEnterprise.Models.Entities.Contribution>

@{
    ViewData["Title"] = "Contribution";
    Layout = "../../Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">
    <h1>Contributions list:</h1>

    <div class="table-responsive">
        <table class="table table-hover">
            <thead class="thead-light">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Title)
            </th>
            <th>
                Faculty
            <th>
                    @Html.DisplayNameFor(model => model.MegazineId)
            </th>
            <th>
                    @Html.DisplayNameFor(model => model.UserId)
            </th>
            <th>
                Status
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <script>
            function toggleStatus(contributionId) {
                $.post('/Coordinator/Megazine/ToggleContributionStatus', { id: contributionId }, function (data) {
                    location.reload(); // Tải lại trang sau khi thay đổi trạng thái thành công
                });
            }
        </script>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Title)
                </td>
                <td>
                    @item.User.Faculty.Name
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MegazineId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.UserId)
                </td>
                <td>
                    <button onclick="toggleStatus(@item.Id)" class="btn @(item.Status == "Accept" ? "btn-success" : "btn-warning")">
                        @item.Status
                    </button>

                </td>
            </tr>
        }
            </tbody>
        </table>
    </div>
</div>

 
